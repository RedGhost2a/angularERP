<div class="global-height">

<div class="big-container global-big-container">

    <h1 class="title global-title"> Bibliothèque d'ouvrages</h1>

    <div class="header global-header">
      <mat-form-field class="global-search-input">
        <mat-label>Recherche d'un ouvrage</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Ex. bet..." #input>
      </mat-form-field>
      <div class="global-button-add custom-button-add">
        <button  mat-stroked-button color="primary" (click)="openUniteForFormDialog()">Creer une unité</button>
        <button (click)="openDialogCreateOuvrage(null)" mat-raised-button color="primary">Creer un ouvrage</button>
      </div>

    </div>

  <div class="container global-container">
    <table mat-table [dataSource]="dataSource"
           class="mat-elevation-z8 global-table">
      <ng-container matColumnDef="designation">
        <th class="global-th" mat-header-cell *matHeaderCellDef> Désignation</th>
        <td class="global-td global-td-hover-designation" routerLink="/ouvrageDetail/{{ouvrage.id}}" mat-cell *matCellDef="let ouvrage"> {{ouvrage.designation}} </td>
        <!--    <td mat-cell *matCellDef="let ouvrage"> {{ouvrage.cout[0].prixUnitaire}} </td>-->
      </ng-container>
      <ng-container matColumnDef="benefice">
        <th class="global-th" mat-header-cell *matHeaderCellDef> Bénéfice</th>
        <td class="global-td" mat-cell routerLink="/ouvrageDetail/{{ouvrage.id}}" *matCellDef="let ouvrage"> {{ouvrage.benefice}} </td>
      </ng-container>
      <ng-container matColumnDef="aleas">
        <th class="global-th" mat-header-cell *matHeaderCellDef> Aléas</th>
        <td class="global-td " mat-cell routerLink="/ouvrageDetail/{{ouvrage.id}}" *matCellDef="let ouvrage"> {{ouvrage.aleas}} </td>
      </ng-container>
      <ng-container matColumnDef="unite">
        <th class="global-th" mat-header-cell *matHeaderCellDef> Unité</th>
        <td class="global-td " mat-cell routerLink="/ouvrageDetail/{{ouvrage.id}}" *matCellDef="let ouvrage"> {{ouvrage.unite}} </td>
      </ng-container>
      <ng-container matColumnDef="rendement">
        <th class="global-th" mat-header-cell *matHeaderCellDef>Rendement</th>
        <td class="global-td " mat-cell routerLink="/ouvrageDetail/{{ouvrage.id}}" *matCellDef="let ouvrage"> {{ouvrage.ratio}} </td>
      </ng-container>
      <ng-container matColumnDef="uRatio">
        <th class="global-th" mat-header-cell *matHeaderCellDef> U/Ratio</th>
        <td class="global-td " mat-cell routerLink="/ouvrageDetail/{{ouvrage.id}}" *matCellDef="let ouvrage"> {{ouvrage.uRatio}} </td>
      </ng-container>
      <!--  <ng-container matColumnDef="fournisseur">-->
      <!--    <th mat-header-cell *matHeaderCellDef> PU HT </th>-->
      <!--    <td mat-cell *matCellDef="let ouvrage"> {{ouvrage.type}} </td>-->
      <!--  </ng-container>-->
      <ng-container matColumnDef="prixUnitaire">
        <th class="global-th" mat-header-cell *matHeaderCellDef> PU HT</th>
        <td class="global-td " mat-cell routerLink="/ouvrageDetail/{{ouvrage.id}}"
            *matCellDef="let ouvrage">{{ouvrage.prix | number: '1.2-2'}}</td>
      </ng-container>

      <ng-container matColumnDef="entreprise">
        <th class="global-th" mat-header-cell *matHeaderCellDef> Entreprise</th>
        <td class="global-td " mat-cell routerLink="/ouvrageDetail/{{ouvrage.id}}"
            *matCellDef="let ouvrage">{{ouvrage.Entreprise.denomination}}</td>
      </ng-container>

      <ng-container matColumnDef="boutons">
        <th class="global-th" mat-header-cell *matHeaderCellDef></th>
        <td class="global-td " mat-cell *matCellDef="let ouvrage">

          <mat-icon [matMenuTriggerFor]="boutonOuvrage">more_vert</mat-icon>
          <mat-menu class="menuBoutonCout" #boutonOuvrage>
            <button (click)="deleteItem(ouvrage.id)" mat-button color="warn">
              <mat-icon>clear</mat-icon>
              Supprimer
            </button>
          </mat-menu>

        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row class="global-td-hover" *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
    </table>
  </div>
</div>


</div>
